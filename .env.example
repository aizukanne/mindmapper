# ===========================================
# MindMapper - Environment Configuration
# ===========================================
# This is the root environment file for the MindMapper monorepo.
# Copy this file to .env for local development.
#
# For app-specific configuration, you can also use:
# - apps/api/.env.local (backend overrides)
# - apps/web/.env.local (frontend overrides)

# ===========================================
# Database Configuration (Required)
# ===========================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE

DATABASE_URL="postgresql://mindmapper:mindmapper_dev@localhost:5432/mindmapper"

# ===========================================
# Redis Configuration (Optional)
# ===========================================
# Used for caching and session management
# The app works without Redis in development mode

REDIS_URL="redis://localhost:6379"

# ===========================================
# Authentication - Clerk (Optional)
# ===========================================
# Get your keys from https://dashboard.clerk.com
# Authentication is disabled if keys are not provided
#
# CLERK_SECRET_KEY is used by the backend (apps/api)
# VITE_CLERK_PUBLISHABLE_KEY is used by the frontend (apps/web)

CLERK_PUBLISHABLE_KEY="pk_test_..."
CLERK_SECRET_KEY="sk_test_..."
VITE_CLERK_PUBLISHABLE_KEY="pk_test_..."

# ===========================================
# API Server Configuration
# ===========================================

# Server port for the backend API
API_PORT=3001

# Full URL to the API (used internally)
API_URL="http://localhost:3001"

# Node environment: development | production | test
NODE_ENV="development"

# API server host binding
API_HOST="0.0.0.0"

# ===========================================
# Frontend Configuration (Vite)
# ===========================================
# Note: Frontend variables MUST be prefixed with VITE_ to be exposed to browser

# Backend API URL (used by frontend to make API calls)
VITE_API_URL="http://localhost:3001"

# WebSocket URL for real-time collaboration (Yjs)
VITE_YJS_WEBSOCKET_URL="ws://localhost:1234/yjs"

# CORS origin for the backend (frontend URL)
CORS_ORIGIN="http://localhost:5173"

# Frontend URL for share links and email redirects
FRONTEND_URL="http://localhost:5173"

# ===========================================
# WebSocket Configuration (Yjs Collaboration)
# ===========================================

# Port for the Yjs WebSocket server
YJS_WEBSOCKET_PORT=1234

# ===========================================
# Email Service - Resend (Optional)
# ===========================================
# Get your API key from https://resend.com
# Email features are disabled if RESEND_API_KEY is not set

# RESEND_API_KEY="re_..."
# FROM_EMAIL="MindMapper <noreply@mindmapper.app>"
# APP_URL="http://localhost:5173"

# ===========================================
# Storage Configuration (Optional)
# ===========================================
# Provider options: 'local' or 's3'
# Defaults to local file storage

STORAGE_PROVIDER="local"

# Local Storage Settings
UPLOAD_DIR="./uploads"
PUBLIC_URL="http://localhost:3001/uploads"

# S3 Storage Settings (when STORAGE_PROVIDER='s3')
# S3_BUCKET=""
# S3_REGION="us-east-1"
# S3_ACCESS_KEY_ID=""
# S3_SECRET_ACCESS_KEY=""
# S3_ENDPOINT=""
# S3_FORCE_PATH_STYLE="false"

# ===========================================
# Photo Upload Limits (Optional)
# ===========================================

MAX_PHOTOS_PER_MEMBER=100
MAX_PHOTOS_PER_TREE=1000
MAX_FILE_SIZE_MB=10
